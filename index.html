<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <!--<img id="wotd" onload = "draw()" src = "wordoftheday.png" width = "0" height = "0" >-->
        <image id = "wotdImage" src = "https://i.imgur.com/bf6GqW5.png" class = "center"></image>
        <canvas id="canvas" width="606" height="426"></canvas>

        <br></br>
        <input type="text" id = "word">
        <!--<button id = "downloadButton">Download Image</button>-->


        <script>
            var canvas = document.getElementById('canvas');
            var ctx = canvas.getContext('2d');
            var img=loadImage("https://i.imgur.com/bf6GqW5.png", draw)

            
            function loadImage(src, callback) {
                var img = new Image()

                img.onload = callback;
                img.setAttribute('crossorigin', 'anonymous');

                img.src = src;
                return img;
            }


            document.getElementById("word").addEventListener("keyup", function(evt){
                update(this.value.toUpperCase());
            }, false);

            document.getElementById("downloadButton").addEventListener("click", function(e) {
                var image = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream");
                var saveImage = document.getElementById("wotdImage");
                saveImage.src = image;
                download(image, 'wordoftheday.png');
            })

            function draw() {
                ctx.drawImage(img,0,0);
            };

            function update(value) {
                ctx.drawImage(img,0,0);
                ctx.font = '48px impact';
                ctx.fillText(value, 5, 418);

                var image = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream");
                var saveImage = document.getElementById("wotdImage");
                saveImage.src = image;
            }

            function download(data, filename = "untitled.png") {
                var a = document.createElement('a');
                a.href = data;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
            }
        </script>

    </body>
</html>